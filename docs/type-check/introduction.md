# Type Checking

Type checking enables the validation of deployed bytecode against local artifacts, ensuring accuracy. This facilitates developer `A`'s contract deployment, with developer `B` verifying `A`'s deployments with the type checking script. Additionally, the deploying developer can verify the deployed contract themselves, streamlining the process. Developer `A` can initiate verification by deploying the contract locally through Foundry, then compare their generated bytecode with the already on-chain version. By leveraging type checking, developers can efficiently validate contracts, enhancing transparency and security in their Solidity smart contract development workflows.

## Setting Up

### Step 1: Add Dependency

Add `forge-proposal-simulator` to your project using Forge:

```sh
forge install https://github.com/solidity-labs-io/forge-proposal-simulator.git
```

### Step 2: Remapping

Update your `remappings.txt` to include:

```sh
echo @forge-proposal-simulator=lib/forge-proposal-simulator/ >> remappings.txt
```

### Step 3: Addresses File

Create a JSON file following the structure defined in [Addresses](../overview/architecture/addresses.md). We recommend keeping the addresses file in a separate folder, for example `./addresses/addresses.json`. Add all contracts to `Addresses.json`.

### Step 4: TypeCheckAddresses File

Create a `TypeCheckAddresses.json` file following the instructions provided in [type-check.md](./type-check.md).

### Step 5: Install npm packages

Enter the `lib/forge-proposal-simulator/typescript` directory and install npm packages.

```bash
cd lib/forge-proposal-simulator/typescript && npm i
```

Change the directory again to the root repo.

```bash
cd ../../../
```

### Step 6: Add Environment Variables

Add the below environment variables to `.env`.

```
ADDRESSES_PATH                # Path to addresses.json file
TYPE_CHECK_ADDRESSES_PATH     # Path to typeCheckAddresses.json file
```

Example:

```
TYPE_CHECK_ADDRESSES_PATH=addresses/TypeCheckAddresses.json
ADDRESSES_PATH=addresses/Addresses.json
```

### Step 7: File Read Access

Make sure to allow read access to `Addresses.json`, `TypeCheckAddresses.json`, and the `artifact` folder inside of `foundry.toml`.

```toml
[profile.default]

fs_permissions = [{ access = "read", path = "./"}]
```
